(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-073adb7a"],{"2f59":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info"},[a("div",{staticClass:"cards"},[a("div",{staticClass:"cards-header"},[e._v("常用联系人")]),a("div",{staticClass:"cards-body"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"index",label:"序号",width:"180"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),a("el-table-column",{attrs:{prop:"phone_number",label:"电话号码"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.handleEdit(t.$index)}}},[e._v(" 修改 ")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.handleDelete(t.$index)}}},[e._v(" 删除 ")])]}}])})],1),a("div",{staticClass:"btns"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,background:"","page-size":e.queryForm.size},on:{"current-change":e.handleCurrentChange}})],1),a("div",{staticClass:"add"},[a("a",{attrs:{href:"#"},on:{click:function(t){e.isShow=!e.isShow,e.form={name:"",phone:"",email:""}}}},[e._v("添加常用联系人")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"form"},[a("div",{staticClass:"inner"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓 名"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"电 话"}},[a("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),a("el-form-item",{attrs:{label:"Email"}},[a("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("el-form-item",[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"danger"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)])],1),a("el-dialog",{attrs:{visible:e.isShowEdit,width:"30%"},on:{"update:visible":function(t){e.isShowEdit=t}}},[a("el-form",{ref:"form",attrs:{model:"form","label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓 名"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"电 话"}},[a("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),a("el-form-item",{attrs:{label:"Email"}},[a("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isShowEdit=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("确 定")])],1)],1)],1)])},n=[],r=(a("b0c0"),a("a434"),a("99af"),a("5c96")),i={data:function(){return{tableData:[],isShow:!1,form:{name:"",phone:"",email:""},isShowEdit:!1,queryForm:{page:1,size:6},total:0}},mounted:function(){this._getUserInfo()},methods:{handleEdit:function(e){this.contact_person_id=this.tableData[e].contact_person_id,this.isShowEdit=!0,this.form={phone:this.tableData[e].phone_number,name:this.tableData[e].name,email:this.tableData[e].email}},handleCurrentChange:function(e){this.queryForm.page=e,this._getUserInfo()},handleDelete:function(e){this._delete({contact_person_id:this.tableData[e].contact_person_id},e)},handleSave:function(){var e=this.form,t=e.name,a=e.email,o=e.phone;t?o?this._edit({name:t,email:a,phone_number:o,contact_person_id:this.contact_person_id}):r["Message"].error("电话号不能为空"):r["Message"].error("姓名不能为空")},submit:function(){var e=this.form,t=e.name,a=e.email,o=e.phone;t?o?this._add({name:t,email:a,phone_number:o}):r["Message"].error("电话号不能为空"):r["Message"].error("姓名不能为空")},_delete:function(e,t){var a=this;this.$http.request({url:"/userCenter/deleteContactPerson",method:"get",params:e}).then((function(e){console.log(e.data),1e4===e.data.code&&(r["Message"].success("删除成功"),a.tableData.splice(t,1))}))},_add:function(e){var t=this;this.$http.request({url:"/userCenter/addContactPerson",method:"post",data:e}).then((function(e){console.log(e.data),1e4===e.data.code&&(r["Message"].success("添加成功"),t.isShow=!1)}))},_edit:function(e){var t=this;this.$http.request({url:"/userCenter/modifyContactPerson",method:"post",data:e}).then((function(e){console.log(e.data),1e4===e.data.code&&(r["Message"].success("修改成功"),t.isShowEdit=!1,t._getUserInfo())}))},_getUserInfo:function(){var e=this;this.$http.request({url:"/userCenter/getContactPersons?page=".concat(this.queryForm.page,"&size=").concat(this.queryForm.size),method:"get"}).then((function(t){console.log(t.data),e.tableData=t.data.data.contact_person_list,e.total=t.data.total}))}}},s=i,l=(a("3b75"),a("2877")),c=Object(l["a"])(s,o,n,!1,null,"2c05fee5",null);t["default"]=c.exports},"3b75":function(e,t,a){"use strict";a("7419")},7419:function(e,t,a){},"99af":function(e,t,a){"use strict";var o=a("23e7"),n=a("da84"),r=a("d039"),i=a("e8b5"),s=a("861d"),l=a("7b0b"),c=a("07fa"),d=a("8418"),u=a("65f0"),m=a("1dde"),f=a("b622"),h=a("2d00"),p=f("isConcatSpreadable"),b=9007199254740991,v="Maximum allowed index exceeded",g=n.TypeError,_=h>=51||!r((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),w=m("concat"),y=function(e){if(!s(e))return!1;var t=e[p];return void 0!==t?!!t:i(e)},C=!_||!w;o({target:"Array",proto:!0,forced:C},{concat:function(e){var t,a,o,n,r,i=l(this),s=u(i,0),m=0;for(t=-1,o=arguments.length;t<o;t++)if(r=-1===t?i:arguments[t],y(r)){if(n=c(r),m+n>b)throw g(v);for(a=0;a<n;a++,m++)a in r&&d(s,m,r[a])}else{if(m>=b)throw g(v);d(s,m++,r)}return s.length=m,s}})},a434:function(e,t,a){"use strict";var o=a("23e7"),n=a("da84"),r=a("23cb"),i=a("5926"),s=a("07fa"),l=a("7b0b"),c=a("65f0"),d=a("8418"),u=a("1dde"),m=u("splice"),f=n.TypeError,h=Math.max,p=Math.min,b=9007199254740991,v="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!m},{splice:function(e,t){var a,o,n,u,m,g,_=l(this),w=s(_),y=r(e,w),C=arguments.length;if(0===C?a=o=0:1===C?(a=0,o=w-y):(a=C-2,o=p(h(i(t),0),w-y)),w+a-o>b)throw f(v);for(n=c(_,o),u=0;u<o;u++)m=y+u,m in _&&d(n,u,_[m]);if(n.length=o,a<o){for(u=y;u<w-o;u++)m=u+o,g=u+a,m in _?_[g]=_[m]:delete _[g];for(u=w;u>w-o+a;u--)delete _[u-1]}else if(a>o)for(u=w-o;u>y;u--)m=u+o-1,g=u+a-1,m in _?_[g]=_[m]:delete _[g];for(u=0;u<a;u++)_[u+y]=arguments[u+2];return _.length=w-o+a,n}})},b0c0:function(e,t,a){var o=a("83ab"),n=a("5e77").EXISTS,r=a("e330"),i=a("9bf2").f,s=Function.prototype,l=r(s.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=r(c.exec),u="name";o&&!n&&i(s,u,{configurable:!0,get:function(){try{return d(c,l(this))[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-073adb7a.2b9b5fc8.js.map