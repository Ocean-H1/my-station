(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e07a5c36"],{"211d":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"allOrder cards"},[a("div",{staticClass:"order"},[t._m(0),a("div",{staticClass:"order-body"},[a("div",{staticClass:"search"},[a("span",{staticClass:"text"},[t._v("购票时间:")]),a("div",{staticClass:"start-time time"},[a("span",[t._v("从")]),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.start_time,callback:function(e){t.start_time=e},expression:"start_time"}})],1),a("div",{staticClass:"start-time time"},[a("span",[t._v("到")]),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.end_time,callback:function(e){t.end_time=e},expression:"end_time"}})],1),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"success"},on:{click:t.getOrderInfo}},[t._v("筛选")])],1)]),a("div",{staticClass:"result"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"},"row-key":"order_id",border:"",lazy:"",load:t.load,"tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"master_order_number",label:"订单号",width:"240"}}),a("el-table-column",{attrs:{prop:"shuttle_shift_time",label:"发车时间",width:"180"}}),a("el-table-column",{attrs:{prop:"total_amount",label:"价钱"}}),a("el-table-column",{attrs:{prop:"order_status",label:"状态"}}),a("el-table-column",{attrs:{prop:"start_region",label:"始发地"}}),a("el-table-column",{attrs:{prop:"final_region",label:"到达地"}}),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(a){return t.getOrderDetail(e.row.master_order_number)}}},[t._v(" 订单详情 ")]),a("el-popconfirm",{attrs:{title:"是否确认退票？",icon:"none"},on:{confirm:function(a){return t.handleRefund(e.row.master_order_number,"all")}}},[a("el-button",{attrs:{slot:"reference",size:"small",type:"primary"},slot:"reference"},[t._v("退票")])],1)]}}])})],1),a("div",{staticClass:"toggle"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,background:"","page-size":t.queryForm.size},on:{"current-change":t.handleCurrentChange}})],1)],1),a("div",{staticClass:"history"},[t._v(" 您暂无 相关记录，如需购票请 "),a("router-link",{attrs:{to:"/"}},[t._v("点击这里")])],1)]),a("el-dialog",{attrs:{visible:t.isShowOrderDetail,width:"70%"},on:{"update:visible":function(e){t.isShowOrderDetail=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.subTableData,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"},"row-key":"order_id",border:"",lazy:"",load:t.load,"tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"master_order_number",label:"订单号",width:"240"}}),a("el-table-column",{attrs:{prop:"shuttle_shift_time",label:"发车时间",width:"180"}}),a("el-table-column",{attrs:{prop:"total_amount",label:"价钱"}}),a("el-table-column",{attrs:{prop:"order_status",label:"状态"}}),a("el-table-column",{attrs:{prop:"start_region",label:"始发地"}}),a("el-table-column",{attrs:{prop:"final_region",label:"到达地"}}),a("el-table-column",{attrs:{prop:"ticket_type",label:"票种"}}),a("el-table-column",{attrs:{prop:"card_type",label:"证件类型"}}),a("el-table-column",{attrs:{prop:"card_number",label:"证件号码"}}),a("el-table-column",{attrs:{prop:"refund_amount",label:"退款金额"}}),a("el-table-column",{attrs:{prop:"ride_code",label:"乘车码"}}),a("el-table-column",{attrs:{prop:"start_station",label:"城西客运站"}}),a("el-table-column",{attrs:{prop:"final_station",label:"兴平客运站"}}),a("el-table-column",{attrs:{prop:"ticket_price",label:"票价"}}),a("el-table-column",{attrs:{prop:"station_fee",label:"站台费"}}),a("el-table-column",{attrs:{prop:"refund_fee",label:"退款手续费"}}),a("el-table-column",{attrs:{prop:"insurance_price",label:"保险费"}}),a("el-table-column",{attrs:{prop:"insurance_status",label:"保险状态"}}),a("el-table-column",{attrs:{prop:"shuttle_shift_type",label:"班次类型"}}),a("el-table-column",{attrs:{prop:"line_type",label:"线路类型"}}),a("el-table-column",{attrs:{prop:"car_model",label:"车辆型号"}}),a("el-table-column",{attrs:{prop:"shift_id",label:"班次号"}}),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popconfirm",{attrs:{title:"是否确认退票？",icon:"none"},on:{confirm:function(a){return t.handleRefund(e.row.master_order_number,"single")}}},[a("el-button",{attrs:{slot:"reference",size:"small",type:"primary"},slot:"reference"},[t._v("退票")])],1)]}}])})],1)],1)],1)])},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-title"},[a("span",[t._v("> 我的订单")])])}],n=(a("99af"),a("d3b7"),a("159b"),a("5c96")),o={data:function(){return{start_time:"",end_time:"",tableData:[],subTableData:[],isShowOrderDetail:!1,queryForm:{page:1,size:6},total:0}},mounted:function(){this._getOrderInfo({order_status:"standby"})},methods:{getOrderInfo:function(){var t=this.start_time,e=this.end_time;t&&e?this._getOrderInfo({order_status:"all",start_time:t,end_time:e}):n["Message"].error("请选择时间")},handleCurrentChange:function(t){this.queryForm.page=t,this._getSubOrder()},clickRefund:function(t){this.refundId=t,this.isShowRefundDialog=!0},getOrderDetail:function(t){this.isShowOrderDetail=!0,this._getSubOrder({master_order_number:t})},handleRefund:function(t,e){console.log(t),this._refund({order_number:t,refund_type:e})},load:function(t,e,a){console.log(t,e),setTimeout((function(){a([{id:31,date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{id:32,date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"}])}),1e3)},_getSubOrder:function(t){var e=this;this.$http.request({url:"/order/getOrderDetailInfo?page=".concat(this.queryForm.page,"&size=").concat(this.queryForm.size),method:"get",params:t}).then((function(t){console.log(t.data),1e4===t.data.code&&(e.subTableData=t.data.data.order_detail_list),e.total=t.data.total}))},_refund:function(t){this.$http.request({url:"/order/refundOrder",method:"get",params:t}).then((function(t){console.log(t.data),1e4===t.data.code&&n["Message"].success("退票成功")}))},_getOrderInfo:function(t){var e=this;this.$http.request({url:"/order/getOrderInfo",method:"get",params:t}).then((function(t){console.log(t.data),1e4===t.data.code&&(t.data.data.order_list.forEach((function(t){t.children=[]})),e.tableData=t.data.data.order_list)}))}}},s=o,i=(a("a457"),a("2877")),d=Object(i["a"])(s,r,l,!1,null,"2438025f",null);e["default"]=d.exports},"99af":function(t,e,a){"use strict";var r=a("23e7"),l=a("da84"),n=a("d039"),o=a("e8b5"),s=a("861d"),i=a("7b0b"),d=a("07fa"),c=a("8418"),u=a("65f0"),p=a("1dde"),b=a("b622"),m=a("2d00"),f=b("isConcatSpreadable"),_=9007199254740991,h="Maximum allowed index exceeded",g=l.TypeError,y=m>=51||!n((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),v=p("concat"),w=function(t){if(!s(t))return!1;var e=t[f];return void 0!==e?!!e:o(t)},C=!y||!v;r({target:"Array",proto:!0,forced:C},{concat:function(t){var e,a,r,l,n,o=i(this),s=u(o,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(n=-1===e?o:arguments[e],w(n)){if(l=d(n),p+l>_)throw g(h);for(a=0;a<l;a++,p++)a in n&&c(s,p,n[a])}else{if(p>=_)throw g(h);c(s,p++,n)}return s.length=p,s}})},a457:function(t,e,a){"use strict";a("e727")},e727:function(t,e,a){}}]);
//# sourceMappingURL=chunk-e07a5c36.8519dabf.js.map